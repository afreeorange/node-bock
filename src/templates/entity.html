{% extends "./__base.html" %}

{% block main %}
  <nav>
    <ul>
      {% for node in entity.hierarchy %}
        <li>
          <a data-entity-type="{{ node.type }}" href="{%- if node.name === "ROOT" -%}/ROOT{%- else -%}/{{ node.uri }}{%- endif -%}" title="{{ node.name }}">
            {%- if node.name === "ROOT" -%}Root
            {%- else -%}
              {{ node.name }}
            {%- endif -%}
          </a>
        </li>
      {% endfor %}
    </ul>
  </nav>
  <h1>{{ entity.name }}</h1>
  {% if entity.type === "article" or entity.type === "home" %}
    <article>{{ entity.html | safe }}</article>
  {% else %}
    {% if entity.readme %}
      <div class="readme">{{ entity.readme.html | safe }}</div>
    {% endif %}
    <h2>Folders
      <span>{{ entity.children.folders | length }}</span>
    </h2>
    <ul>
      {% for child in entity.children.folders %}
        <li>
          <a href="/{{ child.uri }}" title="{{ child.name }}">
            {{ child.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
    <h2>Articles
      <span>{{ entity.children.articles | length }}</span>
    </h2>
    <ul>
      {% for child in entity.children.articles %}
        <li>
          <a href="/{{ child.uri }}" title="{{ child.name }}">
            {{ child.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock main %}